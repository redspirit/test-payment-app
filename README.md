# test-payment-app

Сделано в рамках тестового задания.  
Код запущен на моем личном сервере и выделено доменное имя, по нему я ловлю
ответный колбек.

#Использование

Перейти по адресу http://testpay.clouddocs.pw/ откроется тестовая платежная форма.
Из задачи было не понятно какую форму для оплаты использовать, по этому я быстро 
накатал свою форму, там нет никакой валидации, Значение имеет только поле Имя плательщика.
По этому имени будет создан пользователь в таблице **users**. После чего будет отправлен запрос 
на **demo-paygate** и создан объект в таблице **payments** с полученным id.
Дальше после получения данных на /callback мы находим соответствующий payment
и обновляем ему статус и amount. Каждый payment ссылается на user. Баланс 
пользователя вычисляется через pg view на основании записей из payments.
  
Для получения содержимого таблиц базы сделал еще два метода:
 - http://testpay.clouddocs.pw/api/users
 - http://testpay.clouddocs.pw/api/payments

Можно проконтролировать, что записи создаются и платежи обновляются.

Мне осталась непонятна часть с skinport.com и что конкретно там нужно было сделать.
По этому я там только забираю данные из skinport.com и возвращаю обратно.
Метод доступен по адресу http://testpay.clouddocs.pw/items
